<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EdRizz – Build Your Future. One Day at a Time.</title>
  <!--
    EdRizz Offline Prototype
    All-in-one HTML file for demo purposes
    Author: [Your Name/Team]
  -->
  <style>
    /* =====================
       FONTS & BASE STYLES
    ===================== */
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=Inter:wght@400;600&display=swap');
    :root {
      --bg-main: #101624;
      --text-main: #fff;
      --panel-bg: rgba(30,41,59,0.78);
      --panel-border: 1.5px solid rgba(255,255,255,0.13);
      --panel-shadow: 0 8px 32px 0 rgba(31,38,135,0.25), 0 2px 8px #00e0ff22;
      --accent: #00e0ff;
      --accent2: #7f5cff;
      --text-secondary: #b3c6ff;
      --text-tertiary: #7fbcff;
    }
    body.light-mode {
      --bg-main: #f6f8fa;
      --text-main: #222;
      --panel-bg: rgba(255,255,255,0.92);
      --panel-border: 1.5px solid #e0e7ef;
      --panel-shadow: 0 8px 32px 0 #e0e7ef55, 0 2px 8px #7f5cff22;
      --accent: #0077ff;
      --accent2: #b388ff;
      --text-secondary: #4a5a7a;
      --text-tertiary: #0077ff;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Space Grotesk', 'Inter', Arial, sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      overflow-x: hidden;
    }
    body {
      min-height: 100vh;
      position: relative;
    }
    ::selection {
      background: #00e0ff55;
    }
    /* =====================
       3D INTERACTIVE BACKGROUND (CANVAS)
    ===================== */
    #bg-canvas {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: auto;
      display: block;
    }
    /* =====================
       LANDING PAGE HERO
    ===================== */
    #landing {
      min-height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 1;
      text-align: center;
      transition: opacity 0.7s;
      background: none;
    }
    .edrizz-logo {
      width: 92px; height: 92px;
      margin: 0 auto 1.2rem auto;
      border-radius: 50%;
      background: linear-gradient(135deg, #00e0ff 0%, #7f5cff 100%);
      box-shadow: 0 0 32px #00e0ff55, 0 0 12px #7f5cff55;
      display: flex; align-items: center; justify-content: center;
      font-size: 2.7rem;
      color: #fff;
      font-weight: bold;
      letter-spacing: 2px;
      user-select: none;
      border: 3px solid #fff2;
      animation: logoPulse 2.5s infinite;
    }
    @keyframes logoPulse {
      0%, 100% { box-shadow: 0 0 32px #00e0ff55, 0 0 12px #7f5cff55; }
      50% { box-shadow: 0 0 64px #00e0ff99, 0 0 32px #7f5cff99; }
    }
    .hero-title {
      font-size: 2.7rem;
      font-weight: 700;
      background: linear-gradient(90deg, #00e0ff, #7f5cff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1.1rem;
      letter-spacing: 1px;
      text-shadow: 0 0 24px #00e0ff44;
    }
    .hero-sub {
      font-size: 1.25rem;
      color: #b3c6ff;
      margin-bottom: 2.2rem;
      font-weight: 500;
    }
    .start-btn {
      background: linear-gradient(90deg, #00e0ff, #7f5cff);
      color: #fff;
      border: none;
      border-radius: 9999px;
      padding: 1.1rem 2.7rem;
      font-size: 1.25rem;
      font-weight: bold;
      box-shadow: 0 0 24px #00e0ff88, 0 0 8px #7f5cff88;
      cursor: pointer;
      margin-top: 1.2rem;
      transition: box-shadow 0.2s, transform 0.2s, background 0.2s;
      outline: none;
      letter-spacing: 0.5px;
      display: inline-block;
    }
    .start-btn:hover {
      box-shadow: 0 0 40px #7f5cffcc, 0 0 16px #00e0ffcc;
      transform: scale(1.04);
      background: linear-gradient(90deg, #7f5cff, #00e0ff);
    }
    /* =====================
       INTAKE FORM
    ===================== */
    #intake-section {
      min-height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: 0; left: 0;
      z-index: 2;
      background: none;
      transition: opacity 0.7s;
      pointer-events: none;
      opacity: 0;
    }
    #intake-section.active {
      pointer-events: auto;
      opacity: 1;
      position: fixed;
      background: rgba(16,22,36,0.98);
    }
    .glass-form {
      background: rgba(30,41,59,0.82);
      border-radius: 2rem;
      box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
      backdrop-filter: blur(14px);
      border: 1.5px solid rgba(255,255,255,0.18);
      padding: 2.5rem 2.2rem 2.2rem 2.2rem;
      max-width: 410px;
      width: 100%;
      animation: fadeIn 1s cubic-bezier(.4,0,.2,1);
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      z-index: 3;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(40px) scale(0.98); }
      to { opacity: 1; transform: none; }
    }
    .glass-form label {
      color: #7fbcff;
      font-weight: 500;
      margin-bottom: 0.3rem;
      display: block;
    }
    .glass-form input, .glass-form select, .glass-form textarea {
      width: 100%;
      padding: 0.8rem 1rem;
      border-radius: 1.2rem;
      border: 1.5px solid var(--accent2, #7f5cff33);
      background: rgba(255,255,255,0.13);
      color: var(--text-main, #fff);
      font-size: 1.08rem;
      margin-bottom: 0.2rem;
      outline: none;
      transition: background 0.2s, box-shadow 0.2s, border 0.2s;
      box-shadow: 0 2px 12px #00e0ff11;
      font-family: inherit;
    }
    .glass-form input:focus, .glass-form select:focus, .glass-form textarea:focus {
      background: rgba(127,92,255,0.18);
      border: 1.5px solid var(--accent, #00e0ff);
      box-shadow: 0 0 16px #00e0ff44, 0 0 4px #7f5cff44;
    }
    .glass-form button {
      margin-top: 1.2rem;
      align-self: center;
    }
    /* =====================
       DASHBOARD LAYOUT
    ===================== */
    #dashboard {
      min-height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: row;
      background: none;
      position: absolute;
      top: 0; left: 0;
      z-index: 3;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.7s;
    }
    #dashboard.active {
      opacity: 1;
      pointer-events: auto;
      position: relative;
      background: none;
    }
    .sidebar {
      width: 80px;
      min-width: 80px;
      background: rgba(30,41,59,0.85);
      border-right: 1.5px solid #7f5cff33;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2.2rem 0 1.2rem 0;
      gap: 2.2rem;
      z-index: 4;
      box-shadow: 2px 0 24px #7f5cff11;
      position: relative;
    }
    .sidebar .sidebar-logo {
      width: 48px; height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #00e0ff 0%, #7f5cff 100%);
      display: flex; align-items: center; justify-content: center;
      font-size: 1.5rem;
      color: #fff;
      font-weight: bold;
      margin-bottom: 1.2rem;
      box-shadow: 0 0 16px #00e0ff55, 0 0 6px #7f5cff55;
      border: 2px solid #fff2;
    }
    .sidebar-nav {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      width: 100%;
      align-items: center;
    }
    .sidebar-link {
      background: none;
      border: none;
      color: #b3c6ff;
      font-size: 1.4rem;
      cursor: pointer;
      border-radius: 50%;
      width: 44px; height: 44px;
      display: flex; align-items: center; justify-content: center;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      outline: none;
      position: relative;
    }
    .sidebar-link.active, .sidebar-link:hover {
      background: linear-gradient(90deg, #00e0ff55, #7f5cff55);
      color: #fff;
      box-shadow: 0 0 12px #00e0ff88, 0 0 4px #7f5cff88;
      transform: scale(1.08);
    }
    .sidebar-link span {
      font-size: 0.9rem;
      position: absolute;
      left: 50%;
      top: 110%;
      transform: translateX(-50%);
      color: #7fbcff;
      font-weight: 500;
      opacity: 0.8;
      pointer-events: none;
      white-space: nowrap;
    }
    /* =====================
       DASHBOARD MAIN AREA
    ===================== */
    .main {
      flex: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      z-index: 2;
      position: relative;
      max-width: 900px;
      margin: 0 auto;
      background: none;
      box-shadow: none;
      border-radius: 0;
    }
    /* --- POLISH: Greeting at the very top, centered --- */
    .dashboard-greeting {
      width: 100vw;
      text-align: center;
      margin: 0;
      padding: 2.2rem 0 0.5rem 0;
      position: relative;
      z-index: 10;
    }
    .dashboard-greeting .greeting {
      font-size: 2.3rem;
      font-weight: 700;
      background: linear-gradient(90deg, #00e0ff, #7f5cff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 1px;
      text-shadow: 0 0 24px #00e0ff44;
      margin: 0 auto;
      display: inline-block;
    }
    .topbar {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding: 0.2rem 2.2rem 0.7rem 2.2rem;
      background: none;
      position: relative;
      z-index: 2;
      min-height: 0;
    }
    .motivation-quote {
      font-size: 1.1rem;
      color: #b3c6ff;
      font-weight: 500;
      margin-left: 1.2rem;
      min-width: 220px;
      text-align: right;
      transition: color 0.5s;
      animation: fadeInQuote 1.2s cubic-bezier(.4,0,.2,1);
    }
    @keyframes fadeInQuote {
      from { opacity: 0; transform: translateY(-20px) scale(0.98); }
      to { opacity: 1; transform: none; }
    }
    .dashboard-panels {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      gap: 2.2rem;
      padding: 1.2rem 2.2rem 2.2rem 2.2rem;
      width: 100%;
      max-width: 1440px;
      margin: 0 auto;
      z-index: 2;
    }
    /* =====================
       GLASSMORPHIC PANELS
    ===================== */
    .glass-panel {
      background: rgba(30,41,59,0.78);
      border-radius: 1.6rem;
      box-shadow: 0 8px 32px 0 rgba(31,38,135,0.25), 0 2px 8px #00e0ff22;
      backdrop-filter: blur(18px);
      border: 1.5px solid rgba(255,255,255,0.13);
      padding: 2.2rem 1.7rem 1.7rem 1.7rem;
      margin: 0.2rem 0;
      position: relative;
      overflow: hidden;
      animation: fadeInUp 1s cubic-bezier(.4,0,.2,1);
      display: flex;
      flex-direction: column;
      gap: 1.1rem;
      min-width: 0;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(40px) scale(0.98); }
      to { opacity: 1; transform: none; }
    }
    .panel-title {
      font-size: 1.25rem;
      font-weight: bold;
      color: #00e0ff;
      margin-bottom: 0.7rem;
      letter-spacing: 0.5px;
      text-shadow: 0 0 8px #00e0ff33;
    }
    /* =====================
       CALENDAR PANEL
    ===================== */
    .calendar-popup {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(1);
      background: rgba(30,41,59,0.98);
      border-radius: 1.5rem;
      box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37), 0 0 24px #00e0ff44;
      backdrop-filter: blur(18px);
      border: 1.5px solid rgba(255,255,255,0.13);
      width: 340px;
      max-width: 98vw;
      z-index: 1003;
      display: flex;
      flex-direction: column;
      animation: calendarIn 0.5s cubic-bezier(.4,0,.2,1);
      opacity: 1;
      transition: opacity 0.5s, transform 0.5s;
    }
    @keyframes calendarIn {
      from { opacity: 0; transform: translate(-50%, -40%) scale(0.98); }
      to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }
    .calendar-popup.hide {
      opacity: 0;
      pointer-events: none;
      transform: translate(-50%, -60%) scale(0.95);
      transition: opacity 0.5s, transform 0.5s;
    }
    .calendar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.1rem 1.2rem 0.5rem 1.2rem;
      font-size: 1.1rem;
      color: #00e0ff;
      font-weight: bold;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.3rem;
      padding: 0.7rem 1.2rem 1.2rem 1.2rem;
    }
    .calendar-day {
      background: rgba(127,92,255,0.10);
      border-radius: 0.7rem;
      color: #b3c6ff;
      font-size: 1.05rem;
      box-shadow: 0 1px 4px #7f5cff22;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 2.2rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      border: none;
      outline: none;
      position: relative;
    }
    .calendar-day.today {
      background: linear-gradient(90deg, #00e0ff55, #7f5cff55);
      color: #fff;
      font-weight: bold;
      box-shadow: 0 0 12px #00e0ff88, 0 0 4px #7f5cff88;
    }
    .calendar-day.selected {
      background: linear-gradient(90deg, #7f5cff, #00e0ff);
      color: #fff;
      font-weight: bold;
      box-shadow: 0 0 16px #7f5cffcc, 0 0 8px #00e0ffcc;
      z-index: 2;
    }
    .calendar-day:disabled {
      opacity: 0.3;
      pointer-events: none;
    }
    .calendar-tasks {
      padding: 1.1rem 1.2rem 1.2rem 1.2rem;
      color: #b3c6ff;
      font-size: 1.05rem;
      min-height: 60px;
    }
    .calendar-close {
      background: none;
      border: none;
      color: #7f5cff;
      font-size: 1.5rem;
      cursor: pointer;
      margin-left: 0.5rem;
      transition: color 0.2s;
    }
    .calendar-close:hover {
      color: #00e0ff;
    }
    /* =====================
       MOODBOARD PANEL
    ===================== */
    .moodboard-form {
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      margin-bottom: 0.7rem;
    }
    .mood-emoji-row {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
      margin-bottom: 0.2rem;
    }
    .mood-emoji-btn {
      background: rgba(255,255,255,0.10);
      border: none;
      border-radius: 50%;
      font-size: 1.6rem;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
      width: 2.4rem;
      height: 2.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 1px 4px #00e0ff22;
    }
    .mood-emoji-btn.selected, .mood-emoji-btn:hover {
      background: linear-gradient(90deg, #00e0ff, #7f5cff);
      color: #fff;
      box-shadow: 0 0 12px #00e0ff88, 0 0 4px #7f5cff88;
      transform: scale(1.12);
    }
    .reflection-input {
      min-height: 2.2rem;
      resize: none;
      font-family: inherit;
    }
    .reflection-submit {
      margin-top: 0.5rem;
      align-self: center;
      width: 60%;
      min-width: 120px;
      max-width: 220px;
      align-items: center;
      justify-content: center;
      display: flex;
    }
    .reflection-timeline {
      max-height: 180px;
      overflow-y: auto;
      display: flex;
      flex-direction: column-reverse;
      gap: 1.1rem;
      padding-right: 0.2rem;
      margin-top: 0.5rem;
      scroll-behavior: smooth;
    }
    .reflection-card {
      background: rgba(0,224,255,0.10);
      border-radius: 1.1rem;
      box-shadow: 0 2px 8px #00e0ff22;
      padding: 1rem 1.1rem 0.8rem 1.1rem;
      color: #b3c6ff;
      font-size: 1.05rem;
      margin-bottom: 0.2rem;
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      animation: fadeSlideIn 0.7s;
    }
    @keyframes fadeSlideIn {
      from { opacity: 0; transform: translateY(30px) scale(0.98); }
      to { opacity: 1; transform: none; }
    }
    .reflection-card .reflection-header {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      margin-bottom: 0.2rem;
    }
    .reflection-card .reflection-date {
      font-size: 0.92rem;
      color: #7fbcff;
      margin-left: auto;
    }
    .reflection-card .reflection-actions {
      display: flex;
      gap: 0.5rem;
      margin-left: auto;
    }
    .reflection-card .reflection-actions button {
      background: none;
      border: none;
      color: #7f5cff;
      font-size: 1.1rem;
      cursor: pointer;
      transition: color 0.2s;
      padding: 0 0.2rem;
    }
    .reflection-card .reflection-actions button:hover {
      color: #00e0ff;
    }
    /* =====================
       ESSAY LAB PANEL
    ===================== */
    .essay-controls {
      display: flex;
      gap: 0.7rem;
      align-items: center;
      margin-bottom: 0.7rem;
      flex-wrap: wrap;
    }
    .essay-controls input {
      flex: 1;
      min-width: 0;
      margin-bottom: 0;
    }
    .essay-output {
      background: rgba(127,92,255,0.10);
      border-radius: 0.8rem;
      padding: 1rem;
      color: #b3c6ff;
      font-size: 1.05rem;
      min-height: 80px;
      margin-bottom: 0.7rem;
      white-space: pre-line;
    }
    .essay-actions {
      display: flex;
      gap: 0.7rem;
      align-items: center;
      margin-top: 0.2rem;
    }
    .essay-actions button {
      font-size: 1rem;
      padding: 0.5rem 1.2rem;
    }
    /* =====================
       AI CHAT PANEL
    ===================== */
    .ai-chat-panel {
      display: flex;
      flex-direction: column;
      height: 320px;
      min-height: 220px;
      max-height: 340px;
      background: rgba(30,41,59,0.92);
      border-radius: 1.2rem;
      box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37), 0 0 24px #00e0ff44;
      border: 1.5px solid rgba(255,255,255,0.13);
      overflow: hidden;
      position: relative;
    }
    .ai-chat-header {
      font-weight: bold;
      color: #00e0ff;
      font-size: 1.1rem;
      padding: 0.7rem 1.1rem 0.5rem 1.1rem;
      background: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .ai-chat-messages {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      margin-bottom: 0.5rem;
      padding: 0 1.1rem;
      scroll-behavior: smooth;
    }
    .ai-chat-message {
      max-width: 85%;
      padding: 0.7rem 1rem;
      border-radius: 1.1rem;
      font-size: 1rem;
      box-shadow: 0 2px 8px #00e0ff22;
      animation: chatMsgIn 0.5s;
      word-break: break-word;
    }
    @keyframes chatMsgIn {
      from { opacity: 0; transform: translateY(20px) scale(0.98); }
      to { opacity: 1; transform: none; }
    }
    .ai-chat-message.user {
      background: linear-gradient(90deg, #7f5cff33, #00e0ff22);
      color: #fff;
      align-self: flex-end;
      border-bottom-right-radius: 0.3rem;
    }
    .ai-chat-message.ai {
      background: linear-gradient(90deg, #00e0ff22, #7f5cff33);
      color: #b3c6ff;
      align-self: flex-start;
      border-bottom-left-radius: 0.3rem;
    }
    .ai-chat-form {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      margin: 0.7rem 1.1rem 0.7rem 1.1rem;
    }
    .ai-chat-form input {
      flex: 1;
      border-radius: 0.8rem;
      border: none;
      background: rgba(255,255,255,0.08);
      color: #fff;
      font-size: 1rem;
      padding: 0.7rem 1rem;
      outline: none;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 1px 4px #00e0ff11;
    }
    .ai-chat-form input:focus {
      background: rgba(127,92,255,0.13);
      box-shadow: 0 0 8px #7f5cff44;
    }
    .ai-chat-note {
      color: #7fbcff;
      font-size: 0.98rem;
      text-align: center;
      margin-bottom: 0.5rem;
      opacity: 0.8;
    }
    /* =====================
       BUTTONS & INTERACTIONS
    ===================== */
    button, .start-btn {
      outline: none;
      transition: box-shadow 0.2s, transform 0.2s, background 0.2s;
      cursor: pointer;
    }
    button:active, .start-btn:active {
      transform: scale(0.97);
      box-shadow: 0 0 8px #00e0ff99, 0 0 2px #7f5cff99;
    }
    /* =====================
       RESPONSIVE DESIGN
    ===================== */
    @media (max-width: 900px) {
      .dashboard-greeting { padding: 1.2rem 0 0.2rem 0; }
      .dashboard-panels {
        grid-template-columns: 1fr;
        gap: 1.2rem;
        padding: 1.2rem 0.5rem 2.2rem 0.5rem;
      }
      .topbar { padding: 0.2rem 0.7rem 0.7rem 0.7rem; }
    }
    @media (max-width: 700px) {
      .sidebar { width: 56px; min-width: 56px; padding: 1.2rem 0 0.7rem 0; }
      .sidebar .sidebar-logo { width: 36px; height: 36px; font-size: 1.1rem; }
      .sidebar-link { width: 36px; height: 36px; font-size: 1.1rem; }
      .dashboard-greeting { padding: 0.7rem 0 0.1rem 0; }
      .dashboard-panels { padding: 0.7rem 0.1rem 1.2rem 0.1rem; }
      .main { min-height: 100vh; }
    }
    @media (max-width: 480px) {
      .dashboard-greeting { padding: 0.5rem 0 0.1rem 0; }
      .dashboard-panels { padding: 0.2rem 0.1rem 0.7rem 0.1rem; }
      .glass-panel { padding: 1rem 0.3rem 0.7rem 0.3rem; }
      .panel-title { font-size: 1.05rem; }
      .topbar { padding: 0.1rem 0.2rem 0.5rem 0.2rem; }
    }
  </style>
</head>
<body>
  <!-- =====================
       3D INTERACTIVE BACKGROUND (CANVAS)
  ===================== -->
  <canvas id="bg-canvas"></canvas>

  <!-- =====================
       DASHBOARD
  ===================== -->
  <section id="dashboard">
    <!-- Sidebar -->
    <nav class="sidebar">
      <div class="sidebar-logo">ER</div>
      <div class="sidebar-nav">
        <button class="sidebar-link" data-panel="profile" title="Profile">👤<span>Profile</span></button>
        <button class="sidebar-link active" data-panel="home" title="Home">🏠<span>Home</span></button>
        <button class="sidebar-link" data-panel="calendar" title="Calendar">🗓️<span>Calendar</span></button>
        <button class="sidebar-link" data-panel="moodboard" title="Moodboard">🧠<span>Moodboard</span></button>
        <button class="sidebar-link" data-panel="essay" title="Essay Lab">📝<span>Essay Lab</span></button>
        <button class="sidebar-link" data-panel="chat" title="AI Chat">🤖<span>AI Chat</span></button>
        <button class="sidebar-link" data-panel="edrizzcom" title="edrizz.com">🌐<span>edrizz.com</span></button>
      </div>
    </nav>
    <!-- Main Content -->
    <div class="main">
      <!-- POLISH: Greeting at the very top, centered -->
      <div class="dashboard-greeting"><span class="greeting" id="greeting">Hi!</span></div>
      <div class="topbar">
        <div class="motivation-quote" id="motivation-quote"></div>
        <button id="toggle-theme-btn" style="margin-left:1.2rem; background:none; border:none; color:var(--accent); font-size:1.3rem; cursor:pointer;">🌙</button>
      </div>
      <div class="dashboard-panels">
        <!-- Profile Panel -->
        <div class="glass-panel" id="panel-profile" style="display:none; flex-direction:column; align-items:center;">
          <div class="panel-title">👤 Your Profile</div>
          <form id="profile-form" style="width:100%;max-width:340px;display:flex;flex-direction:column;gap:0.7rem;">
            <label for="profile-name">Name</label>
            <input id="profile-name" name="profile-name" maxlength="32" placeholder="Your name..." />
            <label for="profile-grade">Grade Level</label>
            <select id="profile-grade" name="profile-grade">
              <option value="">Select grade</option>
              <option>9</option><option>10</option><option>11</option><option>12</option><option>Gap Year</option>
            </select>
            <label for="profile-country">Country & Target University</label>
            <select id="profile-country" name="profile-country">
              <option value="">Select country/university</option>
              <option value="USA">USA (SAT/ACT)</option>
              <option value="UK">UK (TMUA, ENGAA, MAT, STEP)</option>
              <option value="Canada">Canada</option>
              <option value="Australia">Australia</option>
              <option value="Other">Other</option>
            </select>
            <label for="profile-hours">Daily Commitment (hours)</label>
            <input id="profile-hours" name="profile-hours" type="number" min="0.5" max="12" step="0.5" placeholder="e.g. 1.5" />
            <label for="profile-motivation">1-line Motivation</label>
            <input id="profile-motivation" name="profile-motivation" maxlength="60" placeholder="e.g. I want to get into MIT!" />
            <button class="start-btn" type="submit">Save Profile</button>
            <div id="profile-error-msg" style="color:#ff4d6d; font-size:1rem; text-align:center; min-height:1.2em;"></div>
          </form>
          <div style="color:#7fbcff; font-size:0.98rem; margin-top:0.7rem; text-align:center;">Update your info anytime. This personalizes your dashboard!</div>
        </div>
        <!-- Home Panel -->
        <div class="glass-panel" id="panel-home">
          <div class="panel-title">Welcome to EdRizz</div>
          <div style="color:#b3c6ff; margin-bottom:1.2rem;">Your personalized dashboard for university success.<br>Use the sidebar to explore features!</div>
          <ul style="color:#7fbcff; font-size:1.05rem; margin-bottom:1.2rem;">
            <li>🗓️ <b>Calendar</b>: See your daily AI-generated plan</li>
            <li>🧠 <b>Moodboard</b>: Log your daily reflection</li>
            <li>📝 <b>Essay Lab</b>: Generate essays from your reflections</li>
            <li>🤖 <b>AI Chat</b>: Ask EdRizz for advice (coming soon!)</li>
          </ul>
          <div style="color:#00e0ff; font-size:1.1rem; text-align:center;">Let's build your future, one day at a time!</div>
        </div>
        <!-- Calendar Panel -->
        <div class="glass-panel" id="panel-calendar" style="display:none;">
          <div class="panel-title">🗓️ AI Daily Calendar</div>
          <button class="start-btn" id="open-calendar-btn" style="width:100%;margin-bottom:0.7rem;">Open Calendar</button>
          <div id="calendar-popup-container"></div>
        </div>
        <!-- Moodboard Panel -->
        <div class="glass-panel" id="panel-moodboard" style="display:none;">
          <div class="panel-title">🧠 Daily Moodboard & Reflection</div>
          <form class="moodboard-form" id="moodboard-form">
            <div class="mood-emoji-row">
              <button type="button" class="mood-emoji-btn" data-mood="😄">😄</button>
              <button type="button" class="mood-emoji-btn" data-mood="😊">😊</button>
              <button type="button" class="mood-emoji-btn" data-mood="😐">😐</button>
              <button type="button" class="mood-emoji-btn" data-mood="😞">😞</button>
              <button type="button" class="mood-emoji-btn" data-mood="😡">😡</button>
              <button type="button" class="mood-emoji-btn" data-mood="🤩">🤩</button>
            </div>
            <textarea class="reflection-input" id="reflection-input" maxlength="120" placeholder="Write your daily reflection..."></textarea>
            <button class="start-btn reflection-submit" type="submit">Add Reflection</button>
            <div id="reflection-msg" style="color:#7fbcff; font-size:0.98rem; text-align:center;"></div>
          </form>
          <div style="color:#b3c6ff; font-size:0.98rem; margin-bottom:0.5rem; text-align:center;">Reflections are used to help generate your college essays!</div>
          <div class="reflection-timeline" id="reflection-timeline"></div>
        </div>
        <!-- Essay Lab Panel -->
        <div class="glass-panel" id="panel-essay" style="display:none;">
          <div class="panel-title">📝 Essay Lab</div>
          <div class="essay-controls">
            <input id="essay-theme" maxlength="40" placeholder="Essay theme (e.g. resilience, curiosity)" />
            <select id="essay-tone">
              <option value="inspiring">Inspiring</option>
              <option value="formal">Formal</option>
              <option value="humorous">Humorous</option>
            </select>
            <button class="start-btn" id="generate-essay-btn">Generate My Essay</button>
          </div>
          <div class="essay-output" id="essay-output">Essay draft will appear here...</div>
          <div class="essay-actions">
            <button class="start-btn" id="download-essay-btn">Download Essay</button>
          </div>
        </div>
        <!-- AI Chat Panel -->
        <div class="glass-panel ai-chat-panel" id="panel-chat" style="display:none;">
          <div class="ai-chat-header">EdRizz AI Advisor <span style="font-size:1.2rem;">🤖</span></div>
          <div class="ai-chat-note">AI Bot coming soon — connected to Pickaxe/Chat API</div>
          <div class="ai-chat-messages" id="ai-chat-messages"></div>
          <form class="ai-chat-form" id="ai-chat-form">
            <input id="ai-chat-input" maxlength="120" placeholder="Ask me anything..." autocomplete="off" />
            <button type="submit" class="start-btn" style="padding:0.7rem 1.2rem; font-size:1rem;">Send</button>
          </form>
        </div>
        <!-- edrizz.com Panel -->
        <div class="glass-panel" id="panel-edrizzcom" style="display:none; align-items:center; text-align:center;">
          <div class="panel-title">🌐 edrizz.com</div>
          <div style="color:var(--text-secondary); font-size:1.08rem; margin-bottom:1.2rem;">Visit the official EdRizz SAT Prep website for more resources, practice, and guidance!</div>
          <a href="https://edrizz.com" target="_blank" rel="noopener" class="start-btn" style="font-size:1.15rem;">Go to edrizz.com</a>
        </div>
      </div>
    </div>
  </section>

  <!-- =====================
       JAVASCRIPT LOGIC
  ===================== -->
  <script>
    // =====================
    // 3D INTERACTIVE BACKGROUND (CANVAS, PARALLAX, NEON)
    // =====================
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let w = window.innerWidth, h = window.innerHeight;
    let mouse = {x: w/2, y: h/2};
    // Ripples for click interaction
    let ripples = [];
    function resizeCanvas() {
      w = window.innerWidth; h = window.innerHeight;
      canvas.width = w; canvas.height = h;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    // --- Neon Spheres ---
    const SPHERES = Array.from({length: 7}, (_,i) => ({
      x: Math.random()*w, y: Math.random()*h,
      r: 60+Math.random()*40,
      vx: (Math.random()-0.5)*0.5, vy: (Math.random()-0.5)*0.5,
      color: i%2===0 ? '#00e0ff' : '#7f5cff',
      phase: Math.random()*Math.PI*2
    }));
    // --- Particle Grid ---
    const GRID_ROWS = 10, GRID_COLS = 18;
    const particles = [];
    for(let i=0;i<GRID_ROWS;i++){
      for(let j=0;j<GRID_COLS;j++){
        particles.push({
          x0: (j+0.5)*w/GRID_COLS,
          y0: (i+0.5)*h/GRID_ROWS,
          phase: Math.random()*Math.PI*2
        });
      }
    }
    // --- Parallax effect ---
    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });
    // --- Click orb effect ---
    let orbs = [];
    canvas.addEventListener('click', e => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const color = Math.random() > 0.5 ? '#00e0ff' : '#7f5cff';
      const vx = (Math.random()-0.5)*2.5;
      const vy = -2.5 - Math.random()*1.5;
      orbs.push({ x, y, r: 0, maxR: 22+Math.random()*18, alpha: 0.85, color, vx, vy, life: 0 });
    });
    // --- Animation Loop ---
    function drawBG() {
      ctx.clearRect(0,0,w,h);
      // Draw grid particles
      for(const p of particles){
        const t = Date.now()/900 + p.phase;
        // Parallax: move slightly with mouse
        const px = p.x0 + (mouse.x-w/2)*0.03 + Math.sin(t)*8;
        const py = p.y0 + (mouse.y-h/2)*0.03 + Math.cos(t)*8;
        ctx.beginPath();
        ctx.arc(px,py,2.2+Math.sin(t)*1.2,0,2*Math.PI);
        ctx.fillStyle = 'rgba(127,92,255,0.18)';
        ctx.shadowColor = '#7f5cff';
        ctx.shadowBlur = 8;
        ctx.fill();
        ctx.shadowBlur = 0;
      }
      // Draw neon spheres
      for(const s of SPHERES){
        s.x += s.vx; s.y += s.vy;
        if(s.x<0||s.x>w) s.vx*=-1;
        if(s.y<0||s.y>h) s.vy*=-1;
        const grad = ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r);
        grad.addColorStop(0, s.color===' #00e0ff' ? '#00e0ff88' : '#7f5cff88');
        grad.addColorStop(0.5, s.color+'33');
        grad.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.beginPath();
        ctx.arc(s.x,s.y,s.r,0,2*Math.PI);
        ctx.fillStyle = grad;
        ctx.globalAlpha = 0.7;
        ctx.fill();
        ctx.globalAlpha = 1;
        // Spinning neon ring
        ctx.save();
        ctx.translate(s.x,s.y);
        ctx.rotate(Date.now()/1200 + s.phase);
        ctx.beginPath();
        ctx.arc(0,0,s.r*0.7,0,Math.PI*1.5);
        ctx.strokeStyle = s.color;
        ctx.shadowColor = s.color;
        ctx.shadowBlur = 16;
        ctx.lineWidth = 3.5;
        ctx.stroke();
        ctx.shadowBlur = 0;
        ctx.restore();
      }
      // Draw and animate orbs
      for (let i = orbs.length - 1; i >= 0; i--) {
        const orb = orbs[i];
        if (orb.r < orb.maxR) orb.r += 1.5;
        orb.x += orb.vx;
        orb.y += orb.vy;
        orb.vy += 0.08; // gravity
        orb.alpha *= 0.985;
        // Glow
        ctx.save();
        ctx.beginPath();
        ctx.arc(orb.x, orb.y, orb.r, 0, 2 * Math.PI);
        const grad = ctx.createRadialGradient(orb.x, orb.y, 0, orb.x, orb.y, orb.r);
        grad.addColorStop(0, orb.color+'cc');
        grad.addColorStop(0.5, orb.color+'66');
        grad.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.globalAlpha = orb.alpha;
        ctx.fillStyle = grad;
        ctx.shadowColor = orb.color;
        ctx.shadowBlur = 24;
        ctx.fill();
        ctx.shadowBlur = 0;
        ctx.globalAlpha = 1;
        ctx.restore();
        // Remove if faded or out of bounds
        if (orb.alpha < 0.04 || orb.y-orb.r > h || orb.x+orb.r < 0 || orb.x-orb.r > w) {
          orbs.splice(i, 1);
        }
      }
      // Light trails (mouse parallax)
      ctx.save();
      ctx.globalAlpha = 0.18;
      ctx.beginPath();
      ctx.moveTo(w/2,h/2);
      ctx.lineTo(mouse.x,mouse.y);
      ctx.strokeStyle = '#00e0ff';
      ctx.lineWidth = 7;
      ctx.shadowColor = '#00e0ff';
      ctx.shadowBlur = 24;
      ctx.stroke();
      ctx.restore();
      requestAnimationFrame(drawBG);
    }
    drawBG();

    // =====================
    // SECTION NAVIGATION
    // =====================
    const landing = document.getElementById('landing');
    const intakeSection = document.getElementById('intake-section');
    const dashboard = document.getElementById('dashboard');
    const panels = {
      profile: document.getElementById('panel-profile'),
      home: document.getElementById('panel-home'),
      calendar: document.getElementById('panel-calendar'),
      moodboard: document.getElementById('panel-moodboard'),
      essay: document.getElementById('panel-essay'),
      chat: document.getElementById('panel-chat'),
      edrizzcom: document.getElementById('panel-edrizzcom'),
    };
    function showSection(section) {
      dashboard.classList.toggle('active', section === 'dashboard');
    }
    // Sidebar navigation
    document.querySelectorAll('.sidebar-link').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.sidebar-link').forEach(b=>b.classList.remove('active'));
        this.classList.add('active');
        const panel = this.getAttribute('data-panel');
        Object.keys(panels).forEach(k => panels[k].style.display = (k===panel)?'flex':'none');
      });
    });
    // =====================
    // DASHBOARD INIT
    // =====================
    function showDashboard() {
      // Hide all except dashboard
      showSection('dashboard');
      // Show Profile panel if info missing, else Home
      const user = JSON.parse(localStorage.getItem('edrizz_user')||'{}');
      let missing = !user.name || !user.grade || !user.country || !user.hours || !user.motivation;
      Object.keys(panels).forEach(k => panels[k].style.display = (missing ? k==='profile' : k==='home') ? 'flex' : 'none');
      document.querySelectorAll('.sidebar-link').forEach((b,i)=>{
        if (missing) b.classList.toggle('active', b.getAttribute('data-panel')==='profile');
        else b.classList.toggle('active', b.getAttribute('data-panel')==='home');
      });
      // Fill profile form with user data
      document.getElementById('profile-name').value = user.name || '';
      document.getElementById('profile-grade').value = user.grade || '';
      document.getElementById('profile-country').value = user.country || '';
      document.getElementById('profile-hours').value = user.hours || '';
      document.getElementById('profile-motivation').value = user.motivation || '';
      // Personalize greeting and quote
      document.getElementById('greeting').textContent = user.name ? `Hi, ${user.name}!` : 'Hi!';
      rotateQuote(user.motivation||'');
      // Moodboard: load reflections
      renderMoodTimeline();
      // Essay: clear output
      document.getElementById('essay-output').textContent = 'Essay draft will appear here...';
      // Chat: clear
      chatHistory = [];
      renderChat();
    }
    // =====================
    // MOTIVATIONAL QUOTES
    // =====================
    const dailyQuotes = [
      "The future belongs to those who prepare today. – Malcolm X",
      "Success is the sum of small efforts, repeated day in and day out. – Robert Collier",
      "Dream big, work hard, stay focused, and surround yourself with good people.",
      "Your only limit is your mind.",
      "Opportunities don't happen, you create them. – Chris Grosser",
      "Don't watch the clock; do what it does. Keep going. – Sam Levenson",
      "Great things never come from comfort zones.",
      "Push yourself, because no one else is going to do it for you.",
      "Believe you can and you're halfway there. – Theodore Roosevelt",
      "The best way to predict the future is to create it. – Peter Drucker"
    ];
    function rotateQuote(motivation) {
      const quoteEl = document.getElementById('motivation-quote');
      let idx = (new Date().getDate() + new Date().getMonth()) % dailyQuotes.length;
      function setQuote(i) {
        quoteEl.classList.remove('fade-in');
        quoteEl.classList.add('fade-out');
        setTimeout(() => {
          quoteEl.textContent = i===-1 ? motivation : dailyQuotes[i];
          quoteEl.classList.remove('fade-out');
          quoteEl.classList.add('fade-in');
        }, 400);
      }
      setQuote(idx);
      let nextIdx = (idx+1)%dailyQuotes.length;
      setInterval(()=>{
        setQuote(nextIdx);
        nextIdx = (nextIdx+1)%dailyQuotes.length;
      }, 18000);
    }
    // =====================
    // CALENDAR PANEL LOGIC
    // =====================
    document.getElementById('open-calendar-btn').onclick = function() {
      openCalendarPopup();
    };
    function openCalendarPopup() {
      const container = document.getElementById('calendar-popup-container');
      container.innerHTML = '';
      const popup = document.createElement('div');
      popup.className = 'calendar-popup';
      // Header
      const now = new Date();
      let month = now.getMonth(), year = now.getFullYear();
      function renderCalendar() {
        popup.innerHTML = '';
        // Header
        const header = document.createElement('div');
        header.className = 'calendar-header';
        header.innerHTML = `<button class='calendar-close' title='Close'>&times;</button><span>${now.toLocaleString('default',{month:'long'})} ${year}</span><span></span>`;
        popup.appendChild(header);
        header.querySelector('.calendar-close').onclick = () => {
          popup.classList.add('hide');
          setTimeout(()=>container.innerHTML='', 500);
        };
        // Days grid
        const grid = document.createElement('div');
        grid.className = 'calendar-grid';
        // Weekdays
        ['S','M','T','W','T','F','S'].forEach(d=>{
          const wd = document.createElement('div');
          wd.style.fontWeight = 'bold';
          wd.style.color = '#7fbcff';
          wd.style.textAlign = 'center';
          wd.textContent = d;
          grid.appendChild(wd);
        });
        // Days
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month+1, 0).getDate();
        let dayNum = 1;
        for(let i=0;i<42;i++){
          const day = document.createElement('button');
          day.className = 'calendar-day';
          if(i>=firstDay && dayNum<=daysInMonth){
            day.textContent = dayNum;
            const isToday = (dayNum===now.getDate() && month===now.getMonth() && year===now.getFullYear());
            if(isToday) day.classList.add('today');
            day.onclick = ()=>showTasksForDate(year, month, dayNum);
            dayNum++;
          } else {
            day.disabled = true;
            day.style.background = 'none';
            day.style.boxShadow = 'none';
          }
          grid.appendChild(day);
        }
        popup.appendChild(grid);
      }
      renderCalendar();
      container.appendChild(popup);
    }
    function showTasksForDate(year, month, day) {
      const popup = document.querySelector('.calendar-popup');
      if(!popup) return;
      popup.innerHTML = '';
      // Header
      const header = document.createElement('div');
      header.className = 'calendar-header';
      header.innerHTML = `<button class='calendar-close' title='Close'>&times;</button><span>${day} ${new Date(year,month,day).toLocaleString('default',{month:'long'})} ${year}</span><span></span>`;
      popup.appendChild(header);
      header.querySelector('.calendar-close').onclick = () => {
        popup.classList.add('hide');
        setTimeout(()=>popup.remove(), 500);
      };
      // AI-generated tasks
      const user = JSON.parse(localStorage.getItem('edrizz_user')||'{}');
      const baseTasks = [
        `Review a resource about your target: ${user.country||'your field'}`,
        `Spend ${user.hours||1} hour(s) on SAT/essay prep`,
        'Reflect on your progress and update your roadmap',
        'Reach out to a mentor or peer for advice',
        'Practice a mock test or essay question',
      ];
      const tasks = baseTasks.slice(0, 3 + Math.floor(Math.random()*2));
      const tasksDiv = document.createElement('div');
      tasksDiv.className = 'calendar-tasks';
      tasksDiv.innerHTML = `<b>AI Plan for the Day:</b><ul style='margin:0.7rem 0 0 1.2rem;'>${tasks.map(t=>`<li>${t}</li>`).join('')}</ul>`;
      popup.appendChild(tasksDiv);
    }
    // =====================
    // MOODBOARD LOGIC
    // =====================
    let selectedMood = '';
    let editingReflectionIndex = null;
    function getTodayKey() {
      const d = new Date();
      return `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;
    }
    function getReflections() {
      return JSON.parse(localStorage.getItem('edrizz_reflections')||'[]');
    }
    function saveReflections(arr) {
      localStorage.setItem('edrizz_reflections', JSON.stringify(arr));
    }
    document.querySelectorAll('.mood-emoji-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.mood-emoji-btn').forEach(b=>b.classList.remove('selected'));
        this.classList.add('selected');
        selectedMood = this.dataset.mood;
      });
    });
    document.getElementById('moodboard-form').onsubmit = function(e) {
      e.preventDefault();
      const reflection = document.getElementById('reflection-input').value.trim();
      if(!selectedMood) {
        showReflectionMsg('Please select your mood!');
        return false;
      }
      if(!reflection) {
        showReflectionMsg('Please write a reflection!');
        return false;
      }
      const todayKey = getTodayKey();
      let reflections = getReflections();
      if(reflections.some(r=>r.dateKey===todayKey)) {
        showReflectionMsg('You have already submitted a reflection for today!');
        return false;
      }
      const entry = {
        date: new Date().toLocaleDateString(),
        dateKey: todayKey,
        mood: selectedMood,
        reflection
      };
      reflections.push(entry);
      saveReflections(reflections);
      document.getElementById('reflection-input').value = '';
      document.querySelectorAll('.mood-emoji-btn').forEach(b=>b.classList.remove('selected'));
      selectedMood = '';
      showReflectionMsg('Reflection added!');
      renderMoodTimeline();
      return false;
    };
    function showReflectionMsg(msg) {
      const el = document.getElementById('reflection-msg');
      el.textContent = msg;
      setTimeout(()=>el.textContent='', 2200);
    }
    function renderMoodTimeline() {
      const timeline = document.getElementById('reflection-timeline');
      let reflections = getReflections();
      timeline.innerHTML = '';
      reflections.slice().reverse().forEach((entry, idx) => {
        const card = document.createElement('div');
        card.className = 'reflection-card';
        card.innerHTML = `
          <div class="reflection-header">
            <span class="mood">${entry.mood}</span>
            <span class="reflection-date">${entry.date}</span>
          </div>
          <div class="reflection-text">${entry.reflection}</div>
        `;
        timeline.appendChild(card);
      });
      // Show message if already submitted today
      const todayKey = getTodayKey();
      if(reflections.some(r=>r.dateKey===todayKey)) {
        document.getElementById('reflection-input').disabled = true;
        document.getElementById('reflection-input').placeholder = 'Already submitted for today!';
        document.querySelectorAll('.mood-emoji-btn').forEach(b=>b.disabled=true);
        document.querySelector('.reflection-submit').disabled = true;
      } else {
        document.getElementById('reflection-input').disabled = false;
        document.getElementById('reflection-input').placeholder = 'Write your daily reflection...';
        document.querySelectorAll('.mood-emoji-btn').forEach(b=>b.disabled=false);
        document.querySelector('.reflection-submit').disabled = false;
      }
    }
    // =====================
    // ESSAY LAB LOGIC
    // =====================
    document.getElementById('generate-essay-btn').onclick = function(e) {
      e.preventDefault();
      const theme = document.getElementById('essay-theme').value.trim() || 'growth';
      const tone = document.getElementById('essay-tone').value;
      const user = JSON.parse(localStorage.getItem('edrizz_user')||'{}');
      const reflections = getReflections();
      if(reflections.length===0) {
        document.getElementById('essay-output').textContent = 'Add some reflections first!';
        return;
      }
      // Compose essay from reflections
      let essay = '';
      if(tone==='inspiring') {
        essay += `Throughout my journey, I've learned the importance of ${theme}. `;
        essay += reflections.slice(-3).map(r=>`On ${r.date}, I felt ${r.mood} and reflected: "${r.reflection}"`).join(' ');
        essay += ` These experiences have shaped my motivation to pursue my dreams.`;
      } else if(tone==='formal') {
        essay += `The concept of ${theme} has been a recurring theme in my academic life. `;
        essay += reflections.slice(-3).map(r=>`On ${r.date}, my mood was ${r.mood}. Reflection: ${r.reflection}.`).join(' ');
        essay += ` Such reflections inform my approach to university and beyond.`;
      } else {
        essay += `You know, ${theme} is kind of a big deal for me. `;
        essay += reflections.slice(-3).map(r=>`(${r.date}: ${r.mood}) I thought: "${r.reflection}"`).join(' ');
        essay += ` Anyway, that's why I'm excited for what's next!`;
      }
      document.getElementById('essay-output').textContent = essay;
    };
    document.getElementById('download-essay-btn').onclick = function() {
      const text = document.getElementById('essay-output').textContent;
      if(!text || text==='Essay draft will appear here...') return;
      const blob = new Blob([text], {type:'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'edrizz_essay.txt';
      a.click();
    };
    // =====================
    // AI CHAT PANEL LOGIC
    // =====================
    let chatHistory = [];
    function renderChat() {
      const chatMessages = document.getElementById('ai-chat-messages');
      chatMessages.innerHTML = '';
      chatHistory.forEach(msg => {
        const div = document.createElement('div');
        div.className = 'ai-chat-message ' + msg.role;
        div.textContent = msg.text;
        chatMessages.appendChild(div);
      });
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    function aiRespond(userMsg) {
      // Static responses for demo
      let base = [
        "That's a great question!",
        "You're making awesome progress.",
        "Here's a tip just for you:",
        "Keep going, you're on the right track!",
        "Let me help you with that."
      ];
      let advice = '';
      const q = userMsg.toLowerCase();
      const user = JSON.parse(localStorage.getItem('edrizz_user')||'{}');
      if(q.includes('sat') && user.country === 'USA') advice = "For the SAT, focus on practice tests and review your mistakes. Set a study schedule and use official College Board resources.";
      else if(q.includes('ucas') && user.country === 'UK') advice = "For UCAS, make sure to track deadlines and draft your personal statement early. Check if your course requires admissions tests like TMUA or ENGAA.";
      else if(q.includes('essay')) advice = "Start by reflecting on your unique experiences and goals. Use your daily reflections as inspiration for your essay draft!";
      else if(q.includes('motivate') || q.includes('inspire')) advice = "Remember, every small step you take brings you closer to your dream. Stay curious and keep reflecting!";
      else if(q.includes('plan') && user.motivation) advice = `Based on your motivation: \"${user.motivation}\", break it into smaller milestones and tackle one each day.`;
      else if(q.includes('revise')) advice = "Review your notes from today, focus on weak areas, and don't forget to take breaks!";
      else advice = base[Math.floor(Math.random()*base.length)];
      if(user.name && Math.random() > 0.5) advice = `${user.name}, ${advice}`;
      setTimeout(()=>{
        chatHistory.push({role:'ai', text: advice});
        renderChat();
      }, 700 + Math.random()*400);
    }
    document.getElementById('ai-chat-form').onsubmit = function(e) {
      e.preventDefault();
      const msg = document.getElementById('ai-chat-input').value.trim();
      if(!msg) return false;
      chatHistory.push({role:'user', text: msg});
      renderChat();
      document.getElementById('ai-chat-input').value = '';
      aiRespond(msg);
      return false;
    };
    // =====================
    // THEME TOGGLE LOGIC
    // =====================
    const themeBtn = document.getElementById('toggle-theme-btn');
    function setTheme(light) {
      if(light) {
        document.body.classList.add('light-mode');
        themeBtn.textContent = '☀️';
        localStorage.setItem('edrizz_theme', 'light');
      } else {
        document.body.classList.remove('light-mode');
        themeBtn.textContent = '🌙';
        localStorage.setItem('edrizz_theme', 'dark');
      }
    }
    themeBtn.onclick = function() {
      setTheme(!document.body.classList.contains('light-mode'));
    };
    // On load, set theme from localStorage
    window.addEventListener('DOMContentLoaded', () => {
      setTheme(localStorage.getItem('edrizz_theme') === 'light');
      showDashboard();
    });
    // Profile form logic
    document.getElementById('profile-form').onsubmit = function(e) {
      e.preventDefault();
      const name = document.getElementById('profile-name').value.trim();
      const grade = document.getElementById('profile-grade').value;
      const country = document.getElementById('profile-country').value;
      const hours = document.getElementById('profile-hours').value;
      const motivation = document.getElementById('profile-motivation').value.trim();
      const errMsg = document.getElementById('profile-error-msg');
      if (!name || !grade || !country || !hours || !motivation) {
        errMsg.textContent = 'Please fill in all fields.';
        return false;
      }
      if (isNaN(hours) || Number(hours) < 0.5 || Number(hours) > 12) {
        errMsg.textContent = 'Daily Commitment must be between 0.5 and 12 hours.';
        return false;
      }
      errMsg.textContent = '';
      const user = { name, grade, country, hours, motivation };
      localStorage.setItem('edrizz_user', JSON.stringify(user));
      showDashboard();
      return false;
    };
  </script>
</body>
</html>
